<!doctype html><html lang=zh-hans><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>NEU LUG/posts/docker_jenkins/</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><link rel=stylesheet href=https://neulug.github.io/hugo-theme-console/css/terminal-0.7.1.min.css><link rel=stylesheet href=https://neulug.github.io/hugo-theme-console/css/animate-3.7.2.min.css><link rel=stylesheet href=https://neulug.github.io/hugo-theme-console/css/console.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><meta property="og:title" content="docker+jenkins实现自动化部署"><meta property="og:description" content="描述信息"><meta property="og:type" content="article"><meta property="og:url" content="https://neulug.github.io/posts/docker_jenkins/"><meta property="article:published_time" content="2021-09-21T00:00:00+00:00"><meta name=twitter:title content="docker+jenkins实现自动化部署"><meta name=twitter:description content="描述信息"></head><body class=terminal><div class=container><div class=terminal-nav><header class=terminal-logo><div class="logo terminal-prompt"><a href=https://neulug.github.io/ class=no-style>NEU LUG</a>:~#
<a href=https://neulug.github.io/posts>posts</a>/<a href=https://neulug.github.io/posts/docker_jenkins>docker_jenkins</a>/</div></header><nav class=terminal-menu><ul vocab="https://schema.org/" typeof="BreadcrumbList"><li><a href=https://neulug.github.io/about/ typeof="ListItem">about/</a></li><li><a href=https://neulug.github.io/posts/ typeof="ListItem">posts/</a></li><li><a href=https://neulug.github.io/photos/ typeof="ListItem">photos/</a></li></ul></nav></div></div><div class="container animated zoomIn fast"><h1>docker+jenkins实现自动化部署</h1>Sep. 21, 2021<br><br><h2 id=jenkins-介绍>Jenkins 介绍</h2><p>Jenkins是一个开源软件项目，是基于Java开发的一种持续集成工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件项目可以进行持续集成</p><h2 id=docker>Docker</h2><p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</p><h2 id=自动化部署>自动化部署</h2><p>自动化部署（持续集成/CI+持续交付/CD）不仅可以提升开发效率，让程序员更专注产品与业务的开发，还可以节省很多运维成本以及提升运维效率。</p><p>Jenkins是自动化部署中最流行的工具，尤其是Docker+Jenkins的完美搭配，每个程序员都应该掌握这两个工具的使用。</p><h1 id=1---安装docker>1 安装Docker</h1><p>此步暂略</p><h1 id=2-docker下安装jenkins>2 Docker下安装Jenkins</h1><h3 id=21-搜索docker镜像>2.1 搜索docker镜像</h3><p>docker的hub上有一些我们可以直接使用的镜像，使用这些镜像可以减少我们配置的时间</p><pre><code>docker search jenkins
</code></pre><div align=center><img src=./1.png width=100%></div><p>我们选择使用jenkinsci/blueocean镜像，此镜像已经包含blueocean插件，方便我们使用</p><h3 id=22-拉取镜像>2.2 拉取镜像</h3><pre><code>docker pull jenkinsci/bluecoean
</code></pre><h3 id=23-查看本地镜像>2.3 查看本地镜像</h3><pre><code>docker image ls
</code></pre><div align=center><img src=./2.png width=100%></div><p><code>IMAGE ID</code>: 是我们直接操控某一镜像的唯一ID，使用时一般取前三位即可识别</p><h3 id=24-创建jenkins目录存放容器数据>2.4 创建Jenkins目录，存放容器数据</h3><pre><code>mkdir /data/jenkins_home
</code></pre><h3 id=25-启动jenkin>2.5 启动Jenkin</h3><p>这里我们采用脚本启动，我的脚本内容如下</p><pre><code>sudo docker run \
        -d \  
        -u root \  
        --name jenkins \  
        -p 50000:50000 \  
        -p 8080:8080 \  
        -v /data/jenkins_home:/var/jenkins_home \  
        jenkinsci/blueocean  
</code></pre><h3 id=26-查看jenkins启动情况>2.6 查看Jenkins启动情况</h3><pre><code>docker ps
</code></pre><div align=center><img src=./3.png width=100%></div><h3 id=27-访问jenkins>2.7 访问jenkins</h3><p>jenkins可以通过浏览器进行访问，采用IP:端口号的配置，如我的访问<br>http://101.34.42.228:8080/</p><h1 id=3-管理配置jenkins>3 管理配置Jenkins</h1><p>目前，我们已经完成了jenkins的安装，下面可以进行对jenkins的简单配置工作</p><h3 id=31-解锁>3.1 解锁</h3><p>初次进入jenkins，会在启动时生成一个解锁密码，需要使用密码登录</p><div align=center><img src=./4.jpg width=60%></div><p>进入docker容器查看密码</p><pre><code>docker exec -it jenkins bash
</code></pre><p>jenkins 还可以使用ID号替代（注意容器ID和镜像ID的区分)</p><h3 id=32-自定义jenkins>3.2 自定义Jenkins</h3><p>建议选择安装推荐的插件，减少麻烦</p><div align=center><img src=./5.png width=60%></div><h3 id=33-创建管理员账户实例配置>3.3 创建管理员账户+实例配置</h3><p>这里实例配置直接默认就好</p><div align=center><img src=./6.png width=60%></div><h1 id=4-配置jenkins邮箱>4 配置Jenkins邮箱</h1><h2 id=41-安装邮箱插件>4.1 安装邮箱插件</h2><p>jenkins自带邮件通知，但是不好用，这里介绍一种插件的方法。<br>通过系统管理→管理插件→可选插件，选择Email Extension Plugin插件</p><div align=center><img src=./7.png width=100%></div><div align=center><img src=./8.png width=100%></div><div align=center><img src=./9.png width=100%></div><h2 id=42-进行系统设置>4.2 进行系统设置</h2><p>通过系统管理→系统设置，进行邮件配置</p><div align=center><img src=./8.png width=100%></div><h3 id=421-设置jenkins地址和管理员邮箱地址>4.2.1 设置jenkins地址和管理员邮箱地址</h3><div align=center><img src=./10.png width=100%></div><h3 id=422-设置发件人等信息>4.2.2 设置发件人等信息</h3><div align=center><img src=./11.png width=100%></div><div align=center><img src=./12.png width=100%></div><div align=center><img src=./13.png width=100%></div><p>这里的发件人邮箱需要和系统管理员邮箱保持一致。<br>针对SMTP，密码需要在自己的邮箱设置处设置SMPT授权码<br>SSL服务是否开启由自己邮箱配置决定，不然可能出现设置后无法使用的情况</p><h3 id=423-测试邮箱是否能成功使用>4.2.3 测试邮箱是否能成功使用</h3><div align=center><img src=./14.png width=100%></div><div class=footer>Powered by <a href=https://gohugo.io/>Hugo</a> with
<a href=https://github.com/mrmierzejewski/hugo-theme-console/>Console Theme</a>.</div></div></body></html>